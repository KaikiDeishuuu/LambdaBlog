@import 'tailwindcss';
@import "tw-animate-css";
@plugin '@tailwindcss/forms';
@plugin '@tailwindcss/typography';

@plugin 'tailwindcss-animate';
@source '../node_modules/pliny';
@custom-variant dark (&:where(.dark, .dark *));

/* Core theme configuration */
@theme {
  /* 保留你原有的字体和颜色设计 */
  --font-sans:
    var(--fon@import 'react-activity-calendar/dist/style.css';t-space-grotesk), ui-sans-serif, system-ui, sans-serif, 'Apple Color Emoji',
    'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';

  --color-primary-50: oklch(0.971 0.014 343.198);
  --color-primary-100: oklch(0.948 0.028 342.258);
  --color-primary-200: oklch(0.899 0.061 343.231);
  --color-primary-300: oklch(0.823 0.12 346.018);
  --color-primary-400: oklch(0.718 0.202 349.761);
  --color-primary-500: oklch(0.656 0.241 354.308);
  --color-primary-600: oklch(0.592 0.249 0.584);
  --color-primary-700: oklch(0.525 0.223 3.958);
  --color-primary-800: oklch(0.459 0.187 3.815);
  --color-primary-900: oklch(0.408 0.153 2.432);
  --color-primary-950: oklch(0.284 0.109 3.907);

  --color-gray-50: oklch(0.985 0.002 247.839);
  --color-gray-100: oklch(0.967 0.003 264.542);
  --color-gray-200: oklch(0.928 0.006 264.531);
  --color-gray-300: oklch(0.872 0.01 258.338);
  --color-gray-400: oklch(0.707 0.022 261.325);
  --color-gray-500: oklch(0.551 0.027 264.364);
  --color-gray-600: oklch(0.446 0.03 256.802);
  --color-gray-700: oklch(0.373 0.034 259.733);
  --color-gray-800: oklch(0.278 0.033 256.848);
  --color-gray-900: oklch(0.21 0.034 264.665);
  --color-gray-950: oklch(0.13 0.028 261.692);

  --line-height-11: 2.75rem;
  --line-height-12: 3rem;
  --line-height-13: 3.25rem;
  --line-height-14: 3.5rem;

  --z-60: 60;
  --z-70: 70;
  --z-80: 80;
}

@layer base {
  html {
    font-size: 19px;
  }
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--color-gray-200, currentColor);
  }

  a,
  button {
    outline-color: var(--color-primary-500);
  }

  a:focus-visible,
  button:focus-visible {
    outline: 2px solid;
    border-radius: var(--radius-sm);
    outline-color: var(--color-primary-500);
  }
}

/* --- 插入：统计面板卡片 --- */
.stat-card {
  @apply rounded-xl border border-gray-200 bg-white/50 p-4 shadow-sm transition-all duration-300 hover:shadow-lg dark:border-gray-700 dark:bg-gray-800/50 dark:hover:border-gray-600;
}

/* --- 插入：汉堡按钮样式 --- */
.hamburger-button {
  @apply relative flex h-8 w-8 flex-col items-center justify-center space-y-[6px] transition-transform duration-200 ease-in-out;
}
.hamburger-button:active {
  @apply scale-90;
}
.hamburger-line {
  @apply h-0.5 w-7 rounded-full bg-current transition-all;
  transition-timing-function: cubic-bezier(0.55, 0.055, 0.675, 0.19);
}
.hamburger-button[aria-expanded='true'] .hamburger-line:nth-child(1) {
  @apply translate-y-[8px] rotate-45;
  transition-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);
}
.hamburger-button[aria-expanded='true'] .hamburger-line:nth-child(2) {
  @apply opacity-0;
}
.hamburger-button[aria-expanded='true'] .hamburger-line:nth-child(3) {
  @apply -translate-y-[8px] -rotate-45;
  transition-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);
}

/* --- 新增：移动端侧边栏样式 --- */
.sidebar-panel {
  @apply flex h-full w-full max-w-xs flex-col bg-white/90 p-6 shadow-lg backdrop-blur-lg dark:bg-gray-950/90;
}
.menu-item {
  @apply hover:text-primary-500 flex w-full items-center py-2 text-2xl font-medium text-gray-900 transition-all duration-200 dark:text-gray-100;
}
.menu-item span {
  @apply flex items-center gap-3; /* 图标与文字对齐 */
}
.menu-separator {
  @apply my-4 w-full border-t border-gray-300 dark:border-gray-700;
}

/* --- 保留你原有的 utilities 层和其他样式 --- */
@layer utilities {
  .prose {
    /* ... */
  }
  .prose-invert {
    /* ... */
  }
}

/* --- 滚动条隐藏 --- */
.no-scrollbar::-webkit-scrollbar {
  display: none;
}
.no-scrollbar {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

/* --- 其他保留样式 --- */
.task-list-item::before {
  @apply hidden;
}
.task-list-item {
  @apply list-none;
}
.footnotes {
  @apply mt-12 border-t border-gray-200 pt-8 dark:border-gray-700;
}
.data-footnote-backref {
  @apply no-underline;
}
.csl-entry {
  @apply my-5;
}
input:-webkit-autofill,
input:-webkit-autofill:focus {
  transition:
    background-color 600000s 0s,
    color 600000s 0s;
}
.katex-display {
  overflow: auto hidden;
}
.content-header-link {
  opacity: 0;
  margin-left: -24px;
  padding-right: 4px;
}
.content-header:hover .content-header-link,
.content-header-link:hover {
  opacity: 1;
}
.linkicon {
  display: inline-block;
  vertical-align: middle;
}
.sidebar-close-button {
  @apply absolute top-4 right-4 rounded-full p-2 hover:bg-gray-200 dark:hover:bg-gray-800;
}

@theme inline {
  --radius-sm:
    calc(var(--radius) - 4px);
  --radius-md:
    calc(var(--radius) - 2px);
  --radius-lg:
    var(--radius);
  --radius-xl:
    calc(var(--radius) + 4px);
  --color-background:
    var(--background);
  --color-foreground:
    var(--foreground);
  --color-card:
    var(--card);
  --color-card-foreground:
    var(--card-foreground);
  --color-popover:
    var(--popover);
  --color-popover-foreground:
    var(--popover-foreground);
  --color-primary:
    var(--primary);
  --color-primary-foreground:
    var(--primary-foreground);
  --color-secondary:
    var(--secondary);
  --color-secondary-foreground:
    var(--secondary-foreground);
  --color-muted:
    var(--muted);
  --color-muted-foreground:
    var(--muted-foreground);
  --color-accent:
    var(--accent);
  --color-accent-foreground:
    var(--accent-foreground);
  --color-destructive:
    var(--destructive);
  --color-border:
    var(--border);
  --color-input:
    var(--input);
  --color-ring:
    var(--ring);
  --color-chart-1:
    var(--chart-1);
  --color-chart-2:
    var(--chart-2);
  --color-chart-3:
    var(--chart-3);
  --color-chart-4:
    var(--chart-4);
  --color-chart-5:
    var(--chart-5);
  --color-sidebar:
    var(--sidebar);
  --color-sidebar-foreground:
    var(--sidebar-foreground);
  --color-sidebar-primary:
    var(--sidebar-primary);
  --color-sidebar-primary-foreground:
    var(--sidebar-primary-foreground);
  --color-sidebar-accent:
    var(--sidebar-accent);
  --color-sidebar-accent-foreground:
    var(--sidebar-accent-foreground);
  --color-sidebar-border:
    var(--sidebar-border);
  --color-sidebar-ring:
    var(--sidebar-ring);
}

:root {
  --radius:
    0.625rem;
  --background:
    oklch(1 0 0);
  --foreground:
    oklch(0.145 0 0);
  --card:
    oklch(1 0 0);
  --card-foreground:
    oklch(0.145 0 0);
  --popover:
    oklch(1 0 0);
  --popover-foreground:
    oklch(0.145 0 0);
  --primary:
    oklch(0.205 0 0);
  --primary-foreground:
    oklch(0.985 0 0);
  --secondary:
    oklch(0.97 0 0);
  --secondary-foreground:
    oklch(0.205 0 0);
  --muted:
    oklch(0.97 0 0);
  --muted-foreground:
    oklch(0.556 0 0);
  --accent:
    oklch(0.97 0 0);
  --accent-foreground:
    oklch(0.205 0 0);
  --destructive:
    oklch(0.577 0.245 27.325);
  --border:
    oklch(0.922 0 0);
  --input:
    oklch(0.922 0 0);
  --ring:
    oklch(0.708 0 0);
  --chart-1:
    oklch(0.646 0.222 41.116);
  --chart-2:
    oklch(0.6 0.118 184.704);
  --chart-3:
    oklch(0.398 0.07 227.392);
  --chart-4:
    oklch(0.828 0.189 84.429);
  --chart-5:
    oklch(0.769 0.188 70.08);
  --sidebar:
    oklch(0.985 0 0);
  --sidebar-foreground:
    oklch(0.145 0 0);
  --sidebar-primary:
    oklch(0.205 0 0);
  --sidebar-primary-foreground:
    oklch(0.985 0 0);
  --sidebar-accent:
    oklch(0.97 0 0);
  --sidebar-accent-foreground:
    oklch(0.205 0 0);
  --sidebar-border:
    oklch(0.922 0 0);
  --sidebar-ring:
    oklch(0.708 0 0);
}

.dark {
  --background:
    oklch(0.145 0 0);
  --foreground:
    oklch(0.985 0 0);
  --card:
    oklch(0.205 0 0);
  --card-foreground:
    oklch(0.985 0 0);
  --popover:
    oklch(0.205 0 0);
  --popover-foreground:
    oklch(0.985 0 0);
  --primary:
    oklch(0.922 0 0);
  --primary-foreground:
    oklch(0.205 0 0);
  --secondary:
    oklch(0.269 0 0);
  --secondary-foreground:
    oklch(0.985 0 0);
  --muted:
    oklch(0.269 0 0);
  --muted-foreground:
    oklch(0.708 0 0);
  --accent:
    oklch(0.269 0 0);
  --accent-foreground:
    oklch(0.985 0 0);
  --destructive:
    oklch(0.704 0.191 22.216);
  --border:
    oklch(1 0 0 / 10%);
  --input:
    oklch(1 0 0 / 15%);
  --ring:
    oklch(0.556 0 0);
  --chart-1:
    oklch(0.488 0.243 264.376);
  --chart-2:
    oklch(0.696 0.17 162.48);
  --chart-3:
    oklch(0.769 0.188 70.08);
  --chart-4:
    oklch(0.627 0.265 303.9);
  --chart-5:
    oklch(0.645 0.246 16.439);
  --sidebar:
    oklch(0.205 0 0);
  --sidebar-foreground:
    oklch(0.985 0 0);
  --sidebar-primary:
    oklch(0.488 0.243 264.376);
  --sidebar-primary-foreground:
    oklch(0.985 0 0);
  --sidebar-accent:
    oklch(0.269 0 0);
  --sidebar-accent-foreground:
    oklch(0.985 0 0);
  --sidebar-border:
    oklch(1 0 0 / 10%);
  --sidebar-ring:
    oklch(0.556 0 0);
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }
  body {
    @apply bg-background text-foreground;
  }
}
